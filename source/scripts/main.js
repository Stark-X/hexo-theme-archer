!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(1),r=n(2),s=n(4),o=(i(n(5)),i(n(6)));console.info("hexo-theme-archer: v20180109"),(0,a.init)(),(0,r.scroll)();new o.default("tags",".sidebar-tags-list",".sidebar-tags-name"),new o.default("categories",".sidebar-categories-list",".sidebar-categories-name");(0,s.initMobile)()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});document.addEventListener("DOMContentLoaded",function(){$(".container").removeClass("container-unloaded"),$(".footer").removeClass("footer-unloaded"),$(".loading").remove()},!1),t.init=function(){var e=$(".site-intro-img:first"),t=$(".site-intro-placeholder:first"),n=e.css("background-image").match(/url\("*([^"]*)"*\)/);if(n.length<2)console.log(n);else{var i=n[1],a=new Image;a.onload=function(){t.remove(),console.info("PLACEHOLDER REMOVED")},a.src=i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scroll=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(3));t.scroll=function(){function e(e){return(b+=e-p)>30?(b=0,1):b<-800?(b=0,-1):0}function t(e){if(e>d){if(1!==m)return m=1,g=!1,1}else if(-1!==m)return m=-1,g=!0,-1;return 0}function n(e,t,n){var i=$(window).height(),a=void 0;a=(a=e<d?0:(e-t)/(n-i)*100)>=0?a:100,v.css("width",a+"%")}function a(i){var a=t(i);if(1===a?(f.addClass("toc-fixed"),c.addClass("home-link-hide"),l.addClass("back-top-show"),u.addClass("header-sidebar-menu-black")):-1===a&&(f.removeClass("toc-fixed"),c.removeClass("home-link-hide"),r.removeClass("banner-show"),l.removeClass("back-top-show"),u.removeClass("header-sidebar-menu-black")),y){var s=e(i);1===s?r.removeClass("banner-show"):-1!==s||g||r.addClass("banner-show"),n(i,_,w)}p=i,k=!1}var r=$(".banner:first"),s=r.find(".post-title a"),o=$(".site-intro:first"),c=$(".home-link:first"),l=$(".back-top:first"),u=$(".header-sidebar-menu:first"),d=o.offset().top+o.outerHeight(),f=$(".toc-wrapper:first"),h=f.find(".toc-catalog"),v=$(".read-progress");h.on("click",function(){f.toggleClass("toc-hide-children")});var p=0,b=0,m=-1,g=!0,y=!1,w=void 0,_=void 0;$(".post-body").length&&(y=!0,_=d,w=$(".article-entry").outerHeight(),w=$(".container")[0].addEventListener("transitionend",function(){w=$(".article-entry").outerHeight()}));var k=!1;$(document).on("scroll",function(){var e=$(document).scrollTop(),t=a.bind(null,e);i.default.rafTick(k,t)}),[s,l].forEach(function(e){e.on("click",i.default.backTop)})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={backTop:function(e){e.preventDefault();var t=setInterval(function(){var e=$(document).scrollTop();window.scrollTo(0,Math.max(Math.floor(.8*e))),0===e&&clearInterval(t)},20)},getAbsPosition:function(e){for(var t=e.offsetLeft,n=e.offsetTop;e=e.offsetParent;)t+=e.offsetLeft,n+=e.offsetTop;return{x:t,y:n}},dateFormater:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,String(e.getFullYear()).substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr(String(n[i]).length)));return t},rafTick:function(e,t){e||requestAnimationFrame(t),e=!0}};t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initMobile=function(){function e(e){e.matches?(console.log("mobile"),document.body.addEventListener("touchstart",function(){})):console.log("desktop")}if(window.matchMedia){var t=window.matchMedia("(max-width: 900px)");t.addListener(e),e(t)}else window.addListener("resize",function(){e((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>900?{matches:!1}:{matches:!0})},!1)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this.options=i({},e.defaultOptions,t),this.activeIndex=this.options.activeIndex,this._initElements(),this._initTabs(),this._bindTabsClick(),this._bindButtonClick(),this._bindWrapperClick(),this.preventOver()}return a(e,[{key:"_initElements",value:function(){this.$sidebar=$(this.options.sidebar),this.$tabs=$(this.options.tabs),this.$panels=$(this.options.panels),this.$menuButton=$(this.options.menuButton),this.$nav=$(this.options.nav),this.$content=$(this.options.content)}},{key:"_initTabs",value:function(){this.$tabs.each(function(e,t){$(t).data("tabIndex",e)})}},{key:"activateSidebar",value:function(){$(".wrapper").addClass("wrapper-sidebar-active"),$(".header").addClass("header-sidebar-active"),$(".toc-wrapper").addClass("toc-slide"),this.$sidebar.addClass("sidebar-active")}},{key:"_inactivateSidebar",value:function(){$(".wrapper").removeClass("wrapper-sidebar-active"),$(".header").removeClass("header-sidebar-active"),$(".toc-wrapper").removeClass("toc-slide"),this.$sidebar.removeClass("sidebar-active")}},{key:"switchTo",value:function(e){this._switchTo(e)}},{key:"_switchTab",value:function(e){for(var t=0;t<3;t++)t!==e?this.$nav.removeClass("sidebar-tabs-active-"+t):this.$nav.addClass("sidebar-tabs-active-"+t)}},{key:"_switchPanel",value:function(e){for(var t=0;t<3;t++)t!==e?this.$content.removeClass("sidebar-content-active-"+t):this.$content.addClass("sidebar-content-active-"+t)}},{key:"_switchTo",value:function(e){this._switchTab(e),this._switchPanel(e)}},{key:"_bindTabsClick",value:function(){var e=this;this.$tabs.click(function(t){var n=$(t.target);e.switchTo(n.data("tabIndex"))})}},{key:"_bindButtonClick",value:function(){var e=this;this.$menuButton.click(function(t){e.activateSidebar()})}},{key:"_bindWrapperClick",value:function(){var e=this;$(".wrapper").click(function(t){e._inactivateSidebar()})}},{key:"preventOver",value:function(){var e=this.$sidebar,t=this;this.$sidebar.on("mousewheel",function(n){var i=n.target,a=e.find(".sidebar-panel-archives"),r=e.find(".sidebar-tags-list"),s=e.find(".sidebar-categories-list");$.contains(r[0],i)||r===i?t.stopSidebarEdgeScroll.call(r[0],n):$.contains(a[0],i)||a===i?t.stopSidebarEdgeScroll.call(a[0],n):$.contains(s[0],i)||s===i?t.stopSidebarEdgeScroll.call(s[0],n):n.preventDefault()})}},{key:"stopSidebarEdgeScroll",value:function(e){this.scrollHeight===this.clientHeight?window.event.preventDefault():this.scrollTop<=0?e.originalEvent.wheelDelta>0&&window.event.preventDefault():this.scrollTop>=this.scrollHeight-this.clientHeight&&e.originalEvent.wheelDelta<0&&window.event.preventDefault()}}]),e}();r.defaultOptions={activeIndex:0};var s=new r({sidebar:".sidebar",nav:".sidebar-tabs",tabs:".sidebar-tabs li",content:".sidebar-content",panels:".sideabar-contents > div",menuButton:".header-sidebar-menu"});t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(n(3)),c=i(n(5)),l=i(n(7)),u=function(){function e(t,n,i){r(this,e),this._initIndexMap=this._initIndexMap.bind(this),this.metaName=t,this.currentQuery="",this.indexMap=new Map,this.postList=document.querySelector(n),this.labelsContainer=document.querySelector(i),this.initInfo(),this.initIndexMap(),this.bindLabelClick(),this.bindOtherClick()}return s(e,[{key:"initInfo",value:function(){var t=jsInfo.root+"content.json?t="+Number(new Date),n=new XMLHttpRequest;n.responseType="",n.open("get",t,!0);var i=$(".tag-load-fail");n.onload=function(){200===this.status||304===this.status?(i.remove(),e.contentJSON=JSON.parse(this.responseText),e.emitter.emit("json ininted")):this.postList.remove()},n.send(),Object.getPrototypeOf(this).initInfo=function(){return console.log("initInfo function is lazyed")}}},{key:"initIndexMap",value:function(){e.emitter.on("json ininted",this._initIndexMap)}},{key:"updateList",value:function(e){var t=this,n=document.createDocumentFragment();this.postList.innerHTML="",e.forEach(function(e){n.appendChild(t._createPostDom(e)[0])}),this.postList.appendChild(n)}},{key:"bindLabelClick",value:function(){var e=this;this.labelsContainer.addEventListener("click",function(t){var n=t.target.getAttribute("data-"+e.metaName);"string"==typeof n&&(e.currLabelName=n,e.switchLabel(e.currLabelName))})}},{key:"bindOtherClick",value:function(){var e=this;document.body.addEventListener("click",function(t){if("post-tag"===t.target.className){t.stopPropagation(),c.default.activateSidebar(),c.default.switchTo(1);var n=t.target.getAttribute("data-tags");e.currLabelName=n,e.switchLabel(e.currLabelName)}}),Object.getPrototypeOf(this).bindOtherClick=function(){return console.log("bindOtherClick function is lazyed")}}},{key:"_switchFocus",value:function(e){var t=this,n=this.labelsContainer.getElementsByClassName("sidebar-label-focus");[].concat(a(n)).forEach(function(e){return e.classList.remove("sidebar-label-focus")}),[].concat(a(this.labelsContainer.children)).forEach(function(n){n.getAttribute("data-"+t.metaName)===e&&n.classList.add("sidebar-label-focus")})}},{key:"switchLabel",value:function(t){this._switchFocus(t);var n=this.indexMap.get(t).map(function(t){return e.contentJSON[t]});this.updateList(n)}},{key:"_createPostDom",value:function(e){var t=$('<li class="meta-post-item"><span class="meta-post-date">'+o.default.dateFormater(new Date(Date.parse(e.date)),"yyyy/MM/dd")+"</span></li>"),n=$('<a class="meta-post-title" href="'+jsInfo.root+e.path+'">'+e.title+"</a>");return t.append(n),t}},{key:"_initIndexMap",value:function(){for(var t=this,n=e.contentJSON,i=0;i<n.length;i++)!function(e){var i=n[e][t.metaName];i.length&&i.forEach(function(n){t.indexMap.has(n.slug)?t.indexMap.get(n.slug).push(e):t.indexMap.set(n.slug,[e])})}(i);this.indexMap.size||document.getElementsByClassName("sidebar-"+this.metaName+"-empty")[0].classList.add("sidebar-"+this.metaName+"-empty-active")}}]),e}();u.emitter=new l.default,t.default=u},function(e,t,n){"use strict";function i(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,i||e,r),o=l?l+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}var c=Object.prototype.hasOwnProperty,l="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(l=!1)),o.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)c.call(e,t)&&n.push(l?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=l?l+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,r=new Array(a);i<a;i++)r[i]=n[i].fn;return r},o.prototype.listenerCount=function(e){var t=l?l+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,r){var s=l?l+e:e;if(!this._events[s])return!1;var o,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,a),!0;case 6:return u.fn.call(u.context,t,n,i,a,r),!0}for(c=1,o=new Array(d-1);c<d;c++)o[c-1]=arguments[c];u.fn.apply(u.context,o)}else{var f,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!o)for(f=1,o=new Array(d-1);f<d;f++)o[f-1]=arguments[f];u[c].fn.apply(u[c].context,o)}}return!0},o.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,n,i){var a=l?l+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var r=this._events[a];if(r.fn)r.fn!==t||i&&!r.once||n&&r.context!==n||s(this,a);else{for(var o=0,c=[],u=r.length;o<u;o++)(r[o].fn!==t||i&&!r[o].once||n&&r[o].context!==n)&&c.push(r[o]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=l?l+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=l,o.EventEmitter=o,e.exports=o}]);